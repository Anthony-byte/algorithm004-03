<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<script>

    var findCircleNum = function (M) {
      const n = M.length;
      const uf = new UnionFind(n);  // 创建一个并查集

        for(let r = 0;r < n;r++) {
            for(let c = r+1;c<n;c++) {
                if(M[r][c] === 1) uf.union(c,r);
            }
        }
    };


    class UnionFind {
        constructor(n) {
            this.count = n;
            this.pre = new Array(n).fill(-1);
        }


        // 获取最高父级
        find(a) {
            if(a === undefined) return a;

            let curr = a;
            while (this.pre[curr] !== undefined && this.pre[curr] != -1) {
                curr = this.pre[curr];
            }

            return curr;
        }

        // 并查集
        union(a,b) {
            const rA = this.find(a);
            const rB = this.find(b);

            if(rA === rB || rA == undefined || rB == undefined) return false;

            this.pre[rA] = rB;
            this.count--;

            return true;
        }

        getCount(){
            return this.count;
        }

    }

</script>

</body>
</html>
